function ToggleNav() {
  let sidebar = document.getElementById("mySidebar");
  if (sidebar.style.width === "250px") {
    sidebar.style.width = "0";
  } else {
    sidebar.style.width = "250px";
  }
}

function toggleDropdown() {
  let dropdownMenu = document.getElementById("dropdown-menu");
  if (dropdownMenu.style.display === "block") {
    dropdownMenu.style.display = "none";
  } else {
    dropdownMenu.style.display = "block";
  }
}

$(document).ready(function () {
  setInterval(function () {
    $.ajax({
      url: "/update-system",
      type: "GET",
      dataType: "json",
      success: function (data) {
        $("#wifi-icon").removeClass().addClass(data.wifi_icon);
        $("#ssid").text(data.ssid);
        $("#temp").text(data.temp + "°C");
        $("#temp2").text(data.temp + "°C");
        $("#temp-icon").removeClass().addClass(data.temp_icon);
        $("#temp-icon2").removeClass().addClass(data.temp_icon);
        $("#cpu").text(data.usage + "%");
        $("#cpu2").text(data.usage + "%");
        $("#fan-icon").removeClass().addClass(data.fan);
      },
    });
  }, 2000);
});

window.onload = function () {
  let version = 0.0;
  fetch("/version")
    .then((response) => response.text())
    .then((text) => {
      version = parseFloat(text);
      fetch("/latest")
        .then((response) => response.text())
        .then((text) => {
          let latest = parseFloat(text);
          if (latest > version) {
            document.querySelector(".version").innerHTML = `v${version}  Update available! Latest: v${latest}`;
            document.querySelector(".version").style.color = "yellow";
          } else {
            document.querySelector(".version").innerHTML = `v${version}`;
          }
        })
        .catch((error) => console.error(error));
    })
    .catch((error) => console.error(error));
};
